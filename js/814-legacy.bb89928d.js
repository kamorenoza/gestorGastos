"use strict";(self["webpackChunkgestor_gastos"]=self["webpackChunkgestor_gastos"]||[]).push([[814],{25099:function(t,e,n){n.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"l-title",class:t.addClass},[n("h2",{staticClass:"main-title"},[t._v(t._s(t.title))]),t.backRoute?n("button",{staticClass:"btn back-arrow",on:{click:function(e){return t.goToRoute(t.backRoute)}}},[n("b-icon",{attrs:{icon:"arrow-left"}})],1):t._e(),t.addButtonRoute?n("button",{staticClass:"btn btn-block button-rounded button-big button-outline-color-general",on:{click:function(e){return t.goToRoute(t.addButtonRoute)}}},[t._v("+")]):t._e(),t.addButtonFunction?n("button",{staticClass:"btn btn-block button-rounded button-big button-outline-color-general",on:{click:function(e){return t.addButtonFunction()}}},[t._v("+")]):t._e()])},i=[],r={name:"TitleGeneral",props:{title:{type:String,default:""},backRoute:{type:String,default:""},addButtonRoute:{type:String,default:""},addButtonFunction:{type:Function}},computed:{addClass:function(){return this.backRoute?"l-title-back":""}},methods:{goToRoute:function(t){this.$router.push(t)}}},s=r,u=n(1001),o=(0,u.Z)(s,a,i,!1,null,null,null),c=o.exports},16412:function(t,e,n){n.d(e,{Z:function(){return w}});var a=n(67906),i=n(16198),r=n(76133),s=n(92751),u=n(40103),o=n(41669),c=n(70198),d=(n(74916),n(15306),n(68757),n(41539),n(54747),n(29253),n(40561),n(82481),n(34553),n(82526),n(41817),n(78783),n(4129),n(33948),n(23796)),p=(n(39714),function(){function t(e,n,a,i,s,u,o,c,p,l){(0,r.Z)(this,t),(0,d.Z)(this,"id",""),(0,d.Z)(this,"amount",0),(0,d.Z)(this,"description",""),(0,d.Z)(this,"category",{}),(0,d.Z)(this,"date",""),(0,d.Z)(this,"paid",!1),(0,d.Z)(this,"fixed",!1),(0,d.Z)(this,"repeat",!1),(0,d.Z)(this,"repeatTimes",!1),(0,d.Z)(this,"payments",[]),(0,d.Z)(this,"type","credit"),(0,d.Z)(this,"editList",[]),(0,d.Z)(this,"product",null),this.amount=e.replace(".",""),this.description=n,this.category=a,this.date=i,this.paid=u,this.fixed=s,this.repeat=o,this.repeatTimes=c,this.type=p,this.product=l}return(0,s.Z)(t,[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(t){return this.id=t,this}},{key:"getAmount",value:function(){return this.amount}},{key:"getDescription",value:function(){return this.description}},{key:"getCategory",value:function(){return this.category}},{key:"getDate",value:function(){return this.date}},{key:"isCredit",value:function(){return"credit"===this.type}},{key:"isPaid",value:function(){return this.paid}},{key:"setpaid",value:function(t){return this.paid=t,this}},{key:"isFixed",value:function(){return this.fixed}},{key:"isRepeat",value:function(){return this.repeat}},{key:"getRepeatTimes",value:function(){return this.repeatTimes}},{key:"setUser",value:function(t){return this.user=t,this}},{key:"getPayments",value:function(){return this.payments}},{key:"setPayments",value:function(t){return this.payments=t,this}},{key:"getObjectData",value:function(t){var e={amount:this.amount.toString().replace(".",""),description:this.description,category:this.category.getObjectData(!0),date:this.date,paid:this.paid,fixed:this.fixed,repeat:this.repeat,user:this.user,type:this.type,product:null};return this.product&&(e.product=this.product.getObjectData(!0)),this.repeat&&(e.repeatTimes=this.repeatTimes),(this.fixed||this.repeat)&&(e.payments=this.payments,e.editList=this.editList),t&&(e.id=this.id),e}}],[{key:"fromJSONResponse",value:function(e,n){var a=new t(e.amount,e.description,e.category,e.date,e.fixed,e.paid,e.repeat,e.repeatTimes,e.type,e.product);return n&&a.setId(n),a}}]),t}()),l=n(39554),h=n(14511),f=n(81670),v=n(89767),y=n(17133),g=n.n(y),Z=n(81803),m=new WeakMap,b=new WeakMap,k=new WeakMap,x=new WeakMap,w=function(){function t(){(0,r.Z)(this,t),(0,u.Z)(this,m,{writable:!0,value:void 0}),(0,u.Z)(this,b,{writable:!0,value:void 0}),(0,u.Z)(this,k,{writable:!0,value:void 0}),(0,u.Z)(this,x,{writable:!0,value:void 0});var e=JSON.parse(localStorage.getItem("currentUser"));e=e.email,(0,c.Z)(this,m,new f.Z(e)),(0,c.Z)(this,b,new v.Z(e)),(0,c.Z)(this,x,new Z.Z),(0,c.Z)(this,k,e)}return(0,s.Z)(t,[{key:"addExpense",value:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e,n,i,r,s,u,c,d,f,v){var y,g,Z,x;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return y=e.replaceAll(".",""),g=l.Z.state.accountsStore.accountSelected,Z=g.expenses,u&&(u=h.P.getCurrentDate()),x=new p(y,n,i,r,s,u,c,d,f,v),x.setUser((0,o.Z)(this,k)),c&&x.setPayments(this.calculatePayments(y,u,r,d)).setpaid(!1),u&&s&&x.setpaid(!1).setPayments([{number:1,amount:y,date:r,paid:!0}]),x.setId(Date.now()),Z.unshift(x.getObjectData(!0)),g.setExpenses(Z),t.prev=11,t.next=14,(0,o.Z)(this,m).updateAccount(g.getObjectData(),g.getId());case 14:return(0,o.Z)(this,m).updateAccountToLocal(g.getObjectData(),g.getId()),(0,o.Z)(this,b).updateVersion(),t.abrupt("return","Agregado correctamente");case 19:t.prev=19,t.t0=t["catch"](11),console.error(t.t0);case 22:case"end":return t.stop()}}),t,this,[[11,19]])})));function e(e,n,a,i,r,s,u,o,c,d){return t.apply(this,arguments)}return e}()},{key:"paidExpense",value:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e,n,i,r){var s,u,c,d,p,f,v;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i&&(i=h.P.getCurrentDate()),s=l.Z.state.accountsStore.accountSelected,u=l.Z.state.expensesStore.currentPeriod,c=s.expenses,c.forEach((function(t,a){t.id===e.id&&(e.fixed?i?c[a].payments.push({date:u,paid:!0,amount:t.amount}):c[a].payments.splice(n,1):e.repeat?c[a].payments[n].paid=i:c[a].paid=i)})),e.product&&(d=r.findIndex((function(t){return t.id===e.product.id})),-1!==d&&(p=r[d],f="credit"===e.type?"debit":"credit",i?(0,o.Z)(this,x).addExpense(e.amount,e.description,e.category,u,f,p,e.id):(v=p.expenses.findIndex((function(t){return t.idAccount===e.id})),-1!==v&&(0,o.Z)(this,x).deleteExpense(p.expenses[v],p)))),s.setExpenses(c),t.prev=7,t.next=10,(0,o.Z)(this,m).updateAccount(s.getObjectData(),s.getId());case 10:return(0,o.Z)(this,m).updateAccountToLocal(s.getObjectData(),s.getId()),(0,o.Z)(this,b).updateVersion(),t.abrupt("return",!0);case 15:t.prev=15,t.t0=t["catch"](7),console.error(t.t0);case 18:case"end":return t.stop()}}),t,this,[[7,15]])})));function e(e,n,a,i){return t.apply(this,arguments)}return e}()},{key:"editExpense",value:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e,n,i,r,s,u,c,d,p,f,v,y){var Z,k,x,w,D=this;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Z=i.replaceAll(".",""),k=l.Z.state.accountsStore.accountSelected,x=l.Z.state.expensesStore.currentPeriod,w=k.expenses,w.forEach((function(t,n){if(t.id===e.id){if(e.description=r,e.category=s.getObjectData?s.getObjectData(!0):s,e.date=u,e.product=y&&y.getObjectData?y.getObjectData(!0):null,c||p){var a=e.editList,i=h.P.getFirstDay(x);v&&(i=h.P.getFirstDay(u));var o={date:i,amount:Z};if(v)a=[],a.push(o);else{var d=a.findIndex((function(t){return t.date===i}));-1!==d?a[d]=o:a.push(o)}var l=[];a.forEach((function(t){g()(t.date).isSameOrBefore(i)&&l.push(t)})),e.editList=l}if(p&&f!==e.times){var m=e.payments;e.repeatTimes=f;var b=D.calculatePayments(Z,!1,u,f);b.forEach((function(t,e){var n=h.P.getFirstDay(t.date),a=h.P.getLastDay(t.date),i=m.findIndex((function(t){return g()(t.date).isBetween(n,a,void 0,"[]")}));-1!==i&&(b[e].paid=m[i].paid)})),e.payments=b}p||c||(e.amount=Z),w[n]=e}})),k.setExpenses(w),t.prev=6,t.next=9,(0,o.Z)(this,m).updateAccount(k.getObjectData(),k.getId());case 9:(0,o.Z)(this,m).updateAccountToLocal(k.getObjectData(),k.getId()),(0,o.Z)(this,b).updateVersion(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](6),console.error(t.t0);case 16:case"end":return t.stop()}}),t,this,[[6,13]])})));function e(e,n,a,i,r,s,u,o,c,d,p,l){return t.apply(this,arguments)}return e}()},{key:"deleteExpense",value:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e,n){var i,r,s,u;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=l.Z.state.accountsStore.accountSelected,r=l.Z.state.expensesStore.currentPeriod,s=i.expenses,u=s.findIndex((function(t){return t.id===e.id})),n?s.splice(u,1):(e.paid=r,s[u]=e),i.setExpenses(s),t.prev=6,t.next=9,(0,o.Z)(this,m).updateAccount(i.getObjectData(),i.getId());case 9:return(0,o.Z)(this,m).updateAccountToLocal(i.getObjectData(),i.getId()),(0,o.Z)(this,b).updateVersion(),t.abrupt("return",!0);case 14:t.prev=14,t.t0=t["catch"](6),console.error(t.t0);case 17:case"end":return t.stop()}}),t,this,[[6,14]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"calculatePayments",value:function(t,e,n,a){for(var i=[{number:0,amount:t,date:n,paid:e}],r=n,s=0;s<a;s++){var u=h.P.sumMonths(r,1);i.push({number:s+1,amount:t,date:u,paid:!1}),r=u}return i}}]),t}()},1160:function(t,e,n){n.d(e,{Z:function(){return s}});var a=n(76133),i=n(92751),r=n(28935),s=function(){function t(){(0,a.Z)(this,t)}return(0,i.Z)(t,[{key:"notify",value:function(t){return r["default"].swal(t)}},{key:"confirm",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Confirmación!";return r["default"].swal({title:e,text:t,type:"warning",showCancelButton:!0,confirmButtonText:"Aceptar",reverseButtons:!0})}},{key:"selectOption",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Seleccione una opción",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#d51212",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#4caf50";return r["default"].swal({title:n,type:"",showDenyButton:!0,showCancelButton:!0,confirmButtonColor:a,confirmButtonText:t,denyButtonText:e,denyButtonColor:i,cancelButtonText:"Cancelar"})}}]),t}()}}]);
//# sourceMappingURL=814-legacy.bb89928d.js.map