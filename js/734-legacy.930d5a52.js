'use strict'; (self.webpackChunkgestor_gastos = self.webpackChunkgestor_gastos || []).push([[734], { 24559: function (e, t, s) { s.d(t, { Z: function () { return z } }); const n = function () { const e = this; const t = e.$createElement; const s = e._self._c || t; return e.account ? s('div', { staticClass: 'l-list px-3' }, [s('accounts-summary', { staticClass: 'mb-2', attrs: { total: e.account.getTotal(e.currentPeriod).total, balance: e.account.getBalance() } }), s('summary-expenses', { attrs: { nameValue1: 'Pagados', value1: e.paid, nameValue2: 'Vencidos', value2: e.expired, nameValue3: 'Pendientes', value3: e.pending } }), e.expensesByDate.length > 0 ? s('div', e._l(e.expensesByDate, function (t, n) { return s('div', { key: n, staticClass: 'mt-4' }, [s('p', { staticClass: 'text-sm text-book mb-3' }, [e._v(' ' + e._s(e._f('formatDateDayWeek')(t.date)) + ' ')]), e._l(t.expenses, function (t) { return s('expense-row', { key: t.id, attrs: { expense: t, calculatePaids: e.calculatePaids } }) })], 2) }), 0) : e._e()], 1) : e._e() }; const a = []; const i = s(4367); const r = (s(41539), s(54747), function () { const e = this; const t = e.$createElement; const s = e._self._c || t; return s('div', { staticClass: 'summary d-flex align-items-center' }, [s('div', { staticClass: 'd-flex align-items-center w-50' }, [s('b-icon', { staticClass: 'mx-2', attrs: { 'font-scale': 1.4, icon: 'piggy-bank' } }), s('div', [s('p', { staticClass: 'gray-xs-text' }, [e._v('Saldo actual')]), s('p', { staticClass: 'text-book text-big', class: e.classTotal }, [e._v('$ ' + e._s(e._f('formatNumber')(e.total)))])])], 1), s('div', { staticClass: 'd-flex align-items-center border-left w-50 pl-2' }, [s('b-icon', { staticClass: 'mx-2', attrs: { 'font-scale': 1.3, icon: 'coin' } }), s('div', [s('p', { staticClass: 'gray-xs-text' }, [e._v(' Balance total')]), s('p', { staticClass: 'text-book text-big' }, [e._v('$ ' + e._s(e._f('formatNumber')(e.balance)))])])], 1)]) }); const o = []; const c = (s(9653), { name: 'AccountsSummary', props: { total: { type: Number, default: 0 }, balance: { type: Number, default: 0 } }, computed: { classTotal: function () { return this.total === 0 ? '' : this.total < 0 ? 'text-danger' : 'text-success' } } }); const l = c; const d = s(1001); const u = (0, d.Z)(l, r, o, !1, null, null, null); const p = u.exports; const x = function () { const e = this; const t = e.$createElement; const s = e._self._c || t; return s('div', { staticClass: 'mb-3 pb-1' }, [s('div', { staticClass: 'd-flex align-items-center justify-content-between' }, [s('div', { staticClass: 'd-flex align-items-center' }, [s('div', { staticClass: 'text-center' }, [s('div', { staticClass: 'icon-category icon-category--small mr-2', style: { backgroundColor: e.category.backgroundColor } }, [s('b-icon', { style: { color: e.category.iconColor }, attrs: { icon: e.category.icon } })], 1)]), s('div', { on: { click: function (t) { return e.openDetailModal(e.expense.id) } } }, [s('p', { staticClass: 'text-capitalize mb3' }, [e._v(' ' + e._s(e.expense.description) + ' ')])])]), s('div', { staticClass: 'text-right d-flex align-items-center justify-content-between' }, [s('p', { staticClass: 'text-book text-medium pr-2', class: e.classAmount }, [e._v('$ ' + e._s(e._f('formatNumber')(e.amount)) + ' ')]), s('div', { staticClass: 'd-flex align-items-center justify-content-between' }, [s('div', { staticClass: 'action mr-2' }, [s('button', { staticClass: 'button-action', class: e.classPaid, attrs: { disabled: e.disabled }, on: { click: function (t) { return e.changePaid() } } }, [s('b-icon', { attrs: { icon: e.paidIcon } })], 1)]), s('div', [s('b-dropdown', { attrs: { size: 'sm', variant: 'link', dropleft: '', 'toggle-class': 'text-decoration-none p-0 text-dark', 'no-caret': '' }, scopedSlots: e._u([{ key: 'button-content', fn: function () { return [s('b-icon', { attrs: { icon: 'three-dots-vertical' } })] }, proxy: !0 }]) }, [s('b-dropdown-item', { staticClass: 'text-medium mb-2', on: { click: function (t) { return e.editExpe() } } }, [e._v('Editar')]), s('b-dropdown-item', { staticClass: 'text-medium mb-2', on: { click: function (t) { return e.deleteExpense() } } }, [e._v('Eliminar')]), s('b-dropdown-item', { staticClass: 'text-medium', on: { click: function (t) { return e.openDetailModal(e.expense.id) } } }, [e._v('Detalles')])], 1)], 1)])])]), s('detail-expense-modal', { attrs: { expense: e.expense, id: e.expense.id, date: e.dateExpense, amount: e.amount, type: e.infoExpense, paid: e.paidText } })], 1) }; const m = []; const f = s(67906); const h = s(16198); const b = (s(82481), s(29253), s(92222), s(34553), s(14511)); const g = s(34665); const v = s(17133); const y = s.n(v); const C = s(1160); const P = s(16412); const _ = function () { const e = this; const t = e.$createElement; const s = e._self._c || t; return s('b-modal', { attrs: { id: e.idModal, centered: '', 'hide-header': '', 'hide-footer': '' } }, [s('div', { staticClass: 'text-center mb-3' }, [s('p', { staticClass: 'text-book' }, [e._v(e._s(e.expense.description))])]), s('div', { staticClass: 'd-flex align-items-center mb-2 border-bottom pb-2' }, [s('p', { staticClass: 'modal-subtitle text-book text-sm' }, [e._v('Fecha')]), s('p', { staticClass: 'text-sm gray-text' }, [e._v(e._s(e._f('formatAllDate')(e.date)))])]), s('div', { staticClass: 'd-flex align-items-center mb-2 border-bottom pb-2' }, [s('p', { staticClass: 'modal-subtitle text-book text-sm' }, [e._v('Tipo')]), s('p', { staticClass: 'text-sm gray-text' }, [e._v(e._s(e.type))])]), s('div', { staticClass: 'd-flex align-items-center mb-2 border-bottom pb-2' }, [s('p', { staticClass: 'modal-subtitle text-book text-sm' }, [e._v('Valor')]), s('p', { staticClass: 'text-sm gray-text' }, [e._v('$ ' + e._s(e._f('formatNumber')(e.amount)))])]), s('div', { staticClass: 'd-flex align-items-center mb-2 border-bottom pb-2' }, [s('p', { staticClass: 'modal-subtitle text-book text-sm' }, [e._v('Categoria')]), s('div', { staticClass: 'd-flex align-items-center' }, [s('div', { staticClass: 'icon-category icon-category--small mr-2', style: { backgroundColor: e.category.backgroundColor } }, [s('b-icon', { style: { color: e.category.iconColor }, attrs: { icon: e.category.icon } })], 1), s('p', { staticClass: 'text-sm gray-text' }, [e._v(e._s(e.category.detail))])])]), s('div', { staticClass: 'd-flex align-items-center mb-2 border-bottom pb-2' }, [s('p', { staticClass: 'modal-subtitle text-book text-sm' }, [e._v('Cuenta')]), e.expense.product ? s('div', { staticClass: 'd-flex align-items-center' }, [s('div', { staticClass: 'icon-category icon-category--small mr-2' }, [s('b-icon', { style: { color: e.expense.product.color }, attrs: { icon: e.expense.product.icon } })], 1), s('p', { staticClass: 'text-sm gray-text' }, [e._v(e._s(e.expense.product.name))])]) : s('p', { staticClass: 'text-sm gray-text' }, [e._v('Ninguna asociada')])]), s('div', { staticClass: 'd-flex align-items-center mb-2 pb-2' }, [s('p', { staticClass: 'modal-subtitle text-book text-sm' }, [e._v('Estado pago')]), s('p', { staticClass: 'text-sm gray-text' }, [e._v(e._s(e.paid))])]), s('div', { staticClass: 'text-center mt-4' }, [s('button', { staticClass: 'btn button-white btn-sm ml-1 w-50', on: { click: function (t) { return e.close() } } }, [e._v('Cerrar')])])]) }; const k = []; const E = { props: { expense: { type: Object }, id: { type: [String, Number] }, date: { type: [String, Number] }, amount: { type: [String, Number] }, type: { type: [String, Number] }, paid: { type: [String, Number, Boolean] } }, computed: { category: function () { return this.expense.category }, idModal: function () { return 'id'.concat(this.id) } }, methods: { close: function () { this.$bvModal.hide(this.idModal) } } }; const w = E; const S = (0, d.Z)(w, _, k, !1, null, null, null); const D = S.exports; const Z = new P.Z(); const A = { components: { DetailExpenseModal: D }, name: 'ExpenseRow', props: { expense: { type: Object, required: !0 }, calculatePaids: { type: Function } }, data: function () { return { indexPayment: 0, paid: !1, amount: 0, disabled: !1 } }, watch: { currentPeriod: function () { this.initAction() }, editExpense: function () { this.initAction() } }, computed: (0, i.Z)((0, i.Z)({ classAmount: function () { return this.expense.type === 'credit' ? 'text-danger' : 'text-success' }, dateExpense: function () { return this.expense.repeat ? this.indexPayment !== -1 ? this.expense.payments[this.indexPayment].date : 0 : this.expense.fixed ? b.P.getFixedExpenseDate(this.expense.date, b.P.getFirstDay(this.currentPeriod)) : this.expense.date }, infoExpense: function () { const e = this.expense.type === 'credit' ? 'Gasto' : 'Ingreso'; if (this.expense.repeat) { const t = b.P.sumMonths(this.expense.date, this.expense.repeatTimes); return ''.concat(e, ' hasta ').concat(b.P.formatAllDate(t)) } return this.expense.fixed ? ''.concat(e, ' fijo') : e }, paidIcon: function () { return this.paid ? 'check2-circle' : y()(this.dateExpense).isBefore(b.P.getCurrentDate()) ? 'exclamation' : 'clock-history' }, classPaid: function () { return this.paid ? 'button-action--success' : y()(this.dateExpense).isBefore(b.P.getCurrentDate()) ? 'button-action--warning' : '' }, paidText: function () { return this.paid ? 'Pagado' : y()(this.dateExpense).isBefore(b.P.getCurrentDate()) ? 'Vencido' : 'Pendiente' }, paidTextClass: function () { return this.paid ? 'text-success' : y()(this.dateExpense).isBefore(b.P.getCurrentDate()) ? 'text-warn' : '' }, category: function () { return this.expense.category } }, (0, g.rn)('expensesStore', ['currentPeriod', 'editExpense'])), (0, g.rn)('productsStore', ['products'])), methods: (0, i.Z)({ getPaymentIndex: function () { const e = b.P.getFirstDay(this.currentPeriod); const t = b.P.getLastDay(this.currentPeriod); this.indexPayment = this.expense.payments.findIndex(function (s) { return y()(s.date).isBetween(e, t, void 0, '[]') }) }, setPaid: function () { this.expense.repeat || this.expense.fixed ? this.indexPayment !== -1 ? this.paid = this.expense.payments[this.indexPayment].paid : this.paid = !1 : this.paid = this.expense.paid }, setAmount: function () { const e = this; this.expense.repeat ? (this.indexPayment !== -1 ? this.amount = this.expense.payments[this.indexPayment].amount : this.amount = this.expense.amount, this.expense.editList.length > 0 && this.expense.editList.forEach(function (t) { y()(b.P.getFirstDay(t.date)).isSameOrBefore(b.P.getFirstDay(e.currentPeriod)) && (e.amount = t.amount) })) : this.expense.fixed ? (this.amount = this.indexPayment !== -1 ? this.expense.payments[this.indexPayment].amount : this.expense.amount, this.expense.editList.length > 0 && this.expense.editList.forEach(function (t) { y()(b.P.getFirstDay(t.date)).isSameOrBefore(b.P.getFirstDay(e.currentPeriod)) && (e.amount = t.amount) })) : this.amount = this.expense.amount }, changePaid: function () { const e = this; return (0, h.Z)((0, f.Z)().mark(function t () { let s, n, a; return (0, f.Z)().wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return s = e.expense.type === 'credit' ? 'gasto' : 'ingreso', n = e.paid ? 'NO PAGADO' : 'PAGADO', t.next = 4, (new C.Z()).confirm('Se marcará el '.concat(s, ' como ').concat(n)); case 4:if (a = t.sent, !a.isConfirmed) { t.next = 12; break } return e.disabled = !0, e.paid ? e.paid = !1 : e.paid = b.P.getCurrentDate(), t.next = 10, Z.paidExpense(e.expense, e.indexPayment, e.paid, e.products); case 10:e.initAction(), e.disabled = !1; case 12:case 'end':return t.stop() } }, t) }))() }, deleteExpense: function () { const e = this; return (0, h.Z)((0, f.Z)().mark(function t () { let s, n, a; return (0, f.Z)().wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (!e.expense.fixed) { t.next = 4; break }e.deleteFixed(), t.next = 12; break; case 4:return s = e.expense.type === 'credit' ? 'gasto' : 'ingreso', n = 'Esta acción es IRREVERSIBLE, se eliminará todo el '.concat(s, ' y cualquier registro de él ¿Está seguro de realizarla?'), t.next = 8, (new C.Z()).confirm(n); case 8:if (a = t.sent, !a.isConfirmed) { t.next = 12; break } return t.next = 12, e.deleteAll(!0); case 12:case 'end':return t.stop() } }, t) }))() }, deleteFixed: function () { const e = this; return (0, h.Z)((0, f.Z)().mark(function t () { let s, n; return (0, f.Z)().wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return s = 'Esta acción es IRREVERSIBLE, ¿Está seguro de realizarla?, Por favor seleccione cuales desea eliminar: ', t.next = 3, (new C.Z()).selectOption('Todos', 'Los próximos', s); case 3:if (n = t.sent, !n.isConfirmed && !n.isDenied) { t.next = 7; break } return t.next = 7, e.deleteAll(n.isConfirmed); case 7:case 'end':return t.stop() } }, t) }))() }, deleteAll: function (e) { const t = this; return (0, h.Z)((0, f.Z)().mark(function s () { return (0, f.Z)().wrap(function (s) { while (1) switch (s.prev = s.next) { case 0:return b.P.startLoading(), s.prev = 1, s.next = 4, Z.deleteExpense(t.expense, e); case 4:b.P.stopLoading(), s.next = 11; break; case 7:s.prev = 7, s.t0 = s.catch(1), (new C.Z()).notify('Ocurrió un error!'), b.P.stopLoading(); case 11:case 'end':return s.stop() } }, s, null, [[1, 7]]) }))() }, editExpe: function () { this.setExpenseSelected(this.expense), this.setIndexPaymentSelected(this.indexPayment), this.$router.push('/add-expense') }, initAction: function () { (this.expense.repeat || this.expense.fixed) && this.getPaymentIndex(), this.setPaid(), this.setAmount(), this.calculatePaids(this.paidText) }, openDetailModal: function (e) { const t = 'id'.concat(e); this.$bvModal.show(t) } }, (0, g.OI)('expensesStore', ['setExpenseSelected', 'setIndexPaymentSelected'])), created: function () { this.initAction() } }; const N = A; const B = (0, d.Z)(N, x, m, !1, null, null, null); const V = B.exports; const F = function () { const e = this; const t = e.$createElement; const s = e._self._c || t; return s('div', { staticClass: 'summary d-flex align-items-center justify-content-between px-2' }, [s('div', { staticClass: 'd-flex align-items-center' }, [s('div', { staticClass: 'action action--sm mr-2' }, [s('button', { staticClass: 'button-action button-action--success', attrs: { disabled: '' } }, [s('b-icon', { attrs: { icon: 'check2-circle' } })], 1)]), s('div', { staticClass: 'd-flex align-items-center' }, [s('p', { staticClass: 'gray-xs-text mr-1' }, [e._v(e._s(e.nameValue1))]), s('p', { staticClass: 'text-book text-medium' }, [e._v(e._s(e.value1))])])]), s('div', { staticClass: 'd-flex align-items-center' }, [s('div', { staticClass: 'action action--sm mr-2' }, [s('button', { staticClass: 'button-action button-action--danger', attrs: { disabled: '' } }, [s('b-icon', { attrs: { icon: 'clock-history' } })], 1)]), s('div', { staticClass: 'd-flex align-items-center' }, [s('p', { staticClass: 'gray-xs-text mr-1' }, [e._v(e._s(e.nameValue3))]), s('p', { staticClass: 'text-book text-medium' }, [e._v(e._s(e.value3))])])]), s('div', { staticClass: 'd-flex align-items-center' }, [s('div', { staticClass: 'action action--sm mr-2' }, [s('button', { staticClass: 'button-action button-action--warning', attrs: { disabled: '' } }, [s('b-icon', { attrs: { icon: 'exclamation' } })], 1)]), s('div', { staticClass: 'd-flex align-items-center' }, [s('p', { staticClass: 'gray-xs-text mr-1' }, [e._v(e._s(e.nameValue2))]), s('p', { staticClass: 'text-book text-medium' }, [e._v(e._s(e.value2))])])])]) }; const I = []; const M = { props: { nameValue1: { type: String, default: '' }, nameValue2: { type: String, default: '' }, nameValue3: { type: String, default: '' }, value1: { type: [String, Number], default: '' }, value2: { type: [String, Number], default: '' }, value3: { type: [String, Number], default: '' } } }; const $ = M; const O = (0, d.Z)($, F, I, !1, null, null, null); const L = O.exports; const T = { components: { ExpenseRow: V, AccountsSummary: p, SummaryExpenses: L }, name: 'ExpensesPerAccount', props: { account: { type: Object } }, data: function () { return { paid: 0, expired: 0, pending: 0 } }, watch: { currentPeriod: function () { this.paid = this.expired = this.pending = 0 } }, computed: (0, i.Z)({ expensesByDate: function () { const e = this; let t = []; const s = []; let n = ''; const a = this.account.getExpenses(this.currentPeriod); return a.forEach(function (a, i) { i === 0 && (n = b.P.getFixedExpenseDate(a.date, e.currentPeriod)), y()(b.P.getFixedExpenseDate(a.date, e.currentPeriod)).isSame(n) || (s.push({ date: n, expenses: t }), n = b.P.getFixedExpenseDate(a.date, e.currentPeriod), t = []), t.push(a) }), s.push({ date: n, expenses: t }), a.length > 0 ? s : [] } }, (0, g.rn)('expensesStore', ['currentPeriod'])), methods: { calculatePaids: function (e) { e === 'Vencido' && (this.expired += 1), e === 'Pagado' && (this.paid += 1), e === 'Pendiente' && (this.pending += 1) } } }; const j = T; const R = (0, d.Z)(j, n, a, !1, null, null, null); var z = R.exports }, 66312: function (e, t, s) { s.d(t, { Z: function () { return p } }); const n = function () { const e = this; const t = e.$createElement; const s = e._self._c || t; return s('div', { staticClass: 'm-select-period' }, [s('b-icon', { attrs: { icon: 'chevron-left' }, on: { click: function (t) { return e.changePeriod() } } }), s('div', { staticClass: 'm-select-period__calendar' }, [s('b-form-datepicker', { attrs: { id: 'datepicker-2', locale: 'es', 'button-only': '', 'today-button': '', 'label-today-button': 'Seleccionar hoy' }, model: { value: e.date, callback: function (t) { e.date = t }, expression: 'date' } }), s('p', [e._v(e._s(e._f('formatDateMonthYear')(e.currentPeriod)) + ' ')])], 1), s('b-icon', { attrs: { icon: 'chevron-right' }, on: { click: function (t) { return e.changePeriod(!0) } } })], 1) }; const a = []; const i = s(4367); const r = s(14511); const o = s(34665); const c = { name: 'SelectPeriod', data: function () { return { date: this.currentPeriod } }, watch: { date: function (e) { e !== this.currentPeriod && this.setCurrentPeriod(e) }, currentPeriod: function (e) { e !== this.date && (this.date = e) } }, computed: (0, i.Z)({}, (0, o.rn)('expensesStore', ['currentPeriod'])), methods: (0, i.Z)({ changePeriod: function (e) { e ? this.setCurrentPeriod(r.P.sumMonths(this.currentPeriod, 1)) : this.setCurrentPeriod(r.P.subtractMonths(this.currentPeriod, 1)) } }, (0, o.OI)('expensesStore', ['setCurrentPeriod'])) }; const l = c; const d = s(1001); const u = (0, d.Z)(l, n, a, !1, null, null, null); var p = u.exports } }])
// # sourceMappingURL=734-legacy.930d5a52.js.map
