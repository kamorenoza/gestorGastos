"use strict";(self["webpackChunkgestor_gastos"]=self["webpackChunkgestor_gastos"]||[]).push([[788],{81550:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("title-general",{attrs:{title:e.title,backRoute:"/"}}),a("div",{staticClass:"l-content px-3"},[a("div",{staticClass:"l-list l-list--form"},[a("input-general",{attrs:{label:"Valor*",validate:e.validate,isNumber:!0,max:11,pattern:"/d*"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),a("input-general",{attrs:{label:"Descripción*",validate:e.validate,max:25},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),a("select-category",{attrs:{validate:e.validate},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),a("select-date",{model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("select-product",{staticClass:"mb-4",model:{value:e.product,callback:function(t){e.product=t},expression:"product"}}),a("switch-checkbox",{staticClass:"mb-3",attrs:{label:"Realizado",disabled:!!e.id},model:{value:e.paid,callback:function(t){e.paid=t},expression:"paid"}}),a("switch-checkbox",{staticClass:"mb-3",attrs:{label:"Es fijo",disabled:e.repeat||!!e.id},model:{value:e.fixedExpense,callback:function(t){e.fixedExpense=t},expression:"fixedExpense"}}),a("switch-checkbox",{staticClass:"mb-1",attrs:{label:"Repetir",disabled:e.fixedExpense||!!e.id},model:{value:e.repeat,callback:function(t){e.repeat=t},expression:"repeat"}}),e.repeat&&e.date?a("repeat-expense",{attrs:{date:e.date,validate:e.validate},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}}):e._e(),a("div",{staticClass:"button-container"},[a("button",{staticClass:"btn button-color-general mr-1 w-50",on:{click:function(t){return e.save()}}},[e._v("Guardar")]),a("button",{staticClass:"btn button-white ml-1 w-50",on:{click:function(t){return e.cancel()}}},[e._v("Cancelar")])])],1)])],1)},s=[],n=a(67906),c=a(16198),o=a(4367),r=(a(82481),a(82526),a(41817),a(29253),a(34553),a(41539),a(54747),a(73727)),l=a(46412),u=a(74216),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-items-center justify-content-between border-bottom pb-2"},[a("label",[e._v(e._s(e.label))]),a("b-form-checkbox",{attrs:{size:"lg",name:"check-button",switch:"",disabled:e.disabled},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},p=[],m={name:"SwitchCheckbox",props:{label:{type:String,default:""},value:{type:[Boolean,String],default:!1},validate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{checked:this.value}},watch:{checked:function(e){this.$emit("input",e)},value:function(e){this.checked=e}}},h=m,f=a(1001),v=(0,f.Z)(h,d,p,!1,null,null,null),x=v.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ml-3"},[a("div",{staticClass:"d-flex align-items-center"},[a("p",{staticClass:"text-medium mr-2 mb-0"},[e._v("Durante")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.times,expression:"times"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"2"},domProps:{value:e.times},on:{input:function(t){t.target.composing||(e.times=t.target.value)}}}),a("p",{staticClass:"text-medium ml-2 mb-0"},[e._v("Meses")])]),a("p",{staticClass:"gray-sm-text pt-2"},[e._v("Se repite hasta: "+e._s(e.finishDate)+" ")]),a("valid-alert",{attrs:{dataValue:e.times,validate:e.validate}})],1)},b=[],y=(a(9653),a(14511)),C=a(74256),k={components:{validAlert:C.Z},name:"RepeatExpense",props:{date:{type:String},validate:{type:Boolean,default:!1},value:{type:[String,Number],default:""}},data:function(){return{times:this.value,dateFisnish:""}},watch:{times:function(e){this.dateFisnish=y.P.sumMonths(this.date,e),this.$emit("input",e)},date:function(){this.dateFisnish=y.P.sumMonths(this.date,this.times)},value:function(e){this.times=e}},computed:{finishDate:function(){return y.P.formatDate(this.dateFisnish)}},created:function(){this.dateFisnish=y.P.sumMonths(this.date,this.times)}},_=k,S=(0,f.Z)(_,g,b,!1,null,null,null),w=S.exports,E=a(1160),Z=a(16412),D=a(81670),P=a(34665),N=a(17133),$=a.n(N),B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",[e._v("Cuenta")]),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDiv,expression:"closeDiv"}],staticClass:"position-relative border-bottom mt-2"},[e.product?a("div",{staticClass:"d-flex align-items-center cursor-pointer",on:{click:function(t){return e.changeShow()}}},[a("div",{staticClass:"icon-category icon-category--small"},[a("b-icon",{style:{color:e.product.iconColor},attrs:{icon:e.product.icon}})],1),a("p",{staticClass:"ml-2 text-medium"},[e._v(e._s(e.product.name))])]):a("p",{staticClass:"cursor-pointer o-select__text text-medium",on:{click:function(t){return e.changeShow()}}},[e._v("¿Está asociado a una cuenta? Seleccionela aquí")]),e.show?a("div",{staticClass:"o-select"},[a("div",{staticClass:"o-select__item",attrs:{value:""},on:{click:function(t){return e.selectProduct("")}}},[a("p",{staticClass:"ml-2 text-medium"},[e._v("Ninguna")])]),e._l(e.products,(function(t){return a("div",{key:t.getId(),staticClass:"o-select__item",attrs:{value:t.getId()},on:{click:function(a){return e.selectProduct(t)}}},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"icon-category icon-category--small"},[a("b-icon",{style:{color:t.iconColor},attrs:{icon:t.icon}})],1),a("p",{staticClass:"ml-2 text-medium"},[e._v(e._s(t.name))])])])}))],2):e._e()])])},I=[],A={name:"SelectProduct",props:{value:{type:[String,Number,Object],default:""}},data:function(){return{product:this.value,show:!1}},watch:{product:function(e){this.$emit("input",e)},value:function(e){this.product=e}},computed:(0,o.Z)({},(0,P.rn)("productsStore",["products"])),methods:{closeDiv:function(){this.show=!1},changeShow:function(){this.show=!this.show},selectProduct:function(e){this.product=e,this.closeDiv()}}},F=A,L=(0,f.Z)(F,B,I,!1,null,null,null),O=L.exports,M=a(25099),V=new Z.Z(new D.Z),j={name:"AddExpense",components:{InputGeneral:r.Z,SelectCategory:l.Z,SelectDate:u.Z,SwitchCheckbox:x,RepeatExpense:w,SelectProduct:O,TitleGeneral:M.Z},data:function(){return{amount:"",description:"",category:"",date:"",fixedExpense:!1,paid:!1,repeat:!1,times:1,validate:!1,id:"",product:""}},watch:{currentPeriod:function(e){this.date=e}},computed:(0,o.Z)({validData:function(){var e=!this.repeat||this.repeat&&this.times;return this.amount&&this.description&&this.category&&this.date&&e},title:function(){var e=this.id?"Editar":"Agregar";return"credit"===this.type?"".concat(e," Gasto"):"".concat(e," Ingreso")}},(0,P.rn)("expensesStore",["type","currentPeriod","expenseSelected","editExpense"])),methods:(0,o.Z)({save:function(){var e=this;return(0,c.Z)((0,n.Z)().mark((function t(){var a,i;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validate=!0,a="",!e.validData){t.next=29;break}if(!e.id){t.next=19;break}if(!e.expenseSelected.fixed&&!e.expenseSelected.repeat){t.next=14;break}return t.next=7,(new E.Z).selectOption("Todos","Los próximos","El cambio desea aplicarlos para: ");case 7:if(i=t.sent,!i.isConfirmed&&!i.isDenied){t.next=12;break}return t.next=11,e.updateExpense(i.isConfirmed);case 11:a=t.sent;case 12:t.next=17;break;case 14:return t.next=16,e.updateExpense();case 16:a=t.sent;case 17:t.next=24;break;case 19:return y.P.startLoading(),t.next=22,V.addExpense(e.amount,e.description,e.category,e.date,e.fixedExpense,e.paid,e.repeat,e.times,e.type,e.product);case 22:a=t.sent,e.clear();case 24:if(y.P.stopLoading(),!a){t.next=28;break}return t.next=28,(new E.Z).notify(a);case 28:e.$router.push("/");case 29:case"end":return t.stop()}}),t)})))()},updateExpense:function(e){var t=this;return(0,c.Z)((0,n.Z)().mark((function a(){var i,s,c;return(0,n.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return y.P.startLoading(),i=t.expenseSelected,i.id=t.id,a.next=5,V.editExpense(i,t.indexPayment,t.amount,t.description,t.category,t.date,t.fixedExpense,t.paid,t.repeat,t.times,e,t.product);case 5:return s=a.sent,c=t.editExpense,c++,t.setEditExpense(c),a.abrupt("return",s);case 10:case"end":return a.stop()}}),a)})))()},clear:function(){this.amount="",this.description="",this.category="",this.currentDate(),this.fixedExpense=!1,this.paid=!1,this.repeat=!1,this.times=1,this.validate=!1,this.id="",this.product="",this.setExpenseSelected(null),this.setIndexPaymentSelected(-1)},cancel:function(){this.clear(),this.$router.push("/")},currentDate:function(){this.date=this.currentPeriod},fillData:function(){this.expenseSelected&&(this.id=this.expenseSelected.id,this.amount=this.setAmount(this.expenseSelected),this.description=this.expenseSelected.description,this.category=this.expenseSelected.category,this.date=this.expenseSelected.date,this.fixedExpense=this.expenseSelected.fixed,this.paid=this.expenseSelected.paid,this.repeat=this.expenseSelected.repeat,this.times=this.expenseSelected.repeatTimes,this.product=this.expenseSelected.product)},openModal:function(){this.currentDate(),this.fillData()},setAmount:function(e){var t=y.P.getFirstDay(this.currentPeriod),a=y.P.getLastDay(this.currentPeriod),i=-1;(e.repeat||e.fixed)&&(i=e.payments.findIndex((function(e){return $()(e.date).isBetween(t,a,void 0,"[]")})));var s=e.amount;return e.repeat&&(-1!==i&&(s=e.payments[i].amount),e.editList.length>0&&e.editList.forEach((function(e){$()(y.P.getFirstDay(e.date)).isSameOrBefore(t)&&(s=e.amount)}))),e.fixed&&(-1!==i&&(s=e.payments[i].amount),e.editList.length>0&&e.editList.forEach((function(e){$()(y.P.getFirstDay(e.date)).isSameOrBefore(t)&&(s=e.amount)}))),s}},(0,P.OI)("expensesStore",["setExpenseSelected","setIndexPaymentSelected","setEditExpense"])),created:function(){this.openModal()},beforeDestroy:function(){this.cancel()}},G=j,R=(0,f.Z)(G,i,s,!1,null,null,null),T=R.exports},46412:function(e,t,a){a.d(t,{Z:function(){return p}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",[e._v("Categoría*")]),a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDiv,expression:"closeDiv"}],staticClass:"position-relative border-bottom mt-2"},[e.category?a("div",{staticClass:"d-flex align-items-center cursor-pointer",on:{click:function(t){return e.changeShow()}}},[a("div",{staticClass:"icon-category icon-category--small",style:{backgroundColor:e.category.backgroundColor}},[a("b-icon",{style:{color:e.category.iconColor},attrs:{icon:e.category.icon}})],1),a("p",{staticClass:"ml-2 text-medium"},[e._v(e._s(e.category.detail))])]):a("p",{staticClass:"cursor-pointer o-select__text text-medium",on:{click:function(t){return e.changeShow()}}},[e._v("Seleccione aqui una categoría...")]),e.show?a("div",{staticClass:"o-select"},e._l(e.categories,(function(t){return a("div",{key:t.getId(),staticClass:"o-select__item",attrs:{value:t.getId()},on:{click:function(a){return e.selectCategory(t)}}},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"icon-category icon-category--small",style:{backgroundColor:t.backgroundColor}},[a("b-icon",{style:{color:t.iconColor},attrs:{icon:t.icon}})],1),a("p",{staticClass:"ml-2 text-medium"},[e._v(e._s(t.detail))])])])})),0):e._e()]),a("valid-alert",{attrs:{"data-value":e.category,validate:e.validate}})],1)},s=[],n=a(4367),c=(a(9653),a(74256)),o=a(34665),r={name:"SelectCategory",components:{validAlert:c.Z},props:{validate:{type:Boolean,default:!1},value:{type:[String,Number,Object],default:""}},data:function(){return{category:this.value,show:!1}},watch:{category:function(e){this.$emit("input",e)},value:function(e){this.category=e}},computed:(0,n.Z)({},(0,o.rn)("categoriesStore",["categories"])),methods:{closeDiv:function(){this.show=!1},changeShow:function(){this.show=!this.show},selectCategory:function(e){this.category=e,this.closeDiv()}}},l=r,u=a(1001),d=(0,u.Z)(l,i,s,!1,null,null,null),p=d.exports},73727:function(e,t,a){a.d(t,{Z:function(){return d}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mb-1"},[a("label",[e._v(e._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"form-control",class:e.customClass,attrs:{type:"text",maxlength:e.max,pattern:e.pattern},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}}),a("valid-alert",{attrs:{"data-value":e.text,validate:e.validate}})],1)},s=[],n=(a(9653),a(14511)),c=a(74256),o={name:"InputGeneral",components:{validAlert:c.Z},props:{label:{type:String,default:""},value:{type:[String,Number],default:""},customClass:{type:String,default:""},max:{type:Number,default:100},isNumber:{type:Boolean,default:!1},pattern:{type:String,default:""},validate:{type:Boolean,default:!1}},data:function(){return{text:this.value}},watch:{text:function(e){this.isNumber&&(this.text=n.P.onlyNumber(e)),this.$emit("input",this.text)},value:function(e){this.text=e}}},r=o,l=a(1001),u=(0,l.Z)(r,i,s,!1,null,null,null),d=u.exports},74216:function(e,t,a){a.d(t,{Z:function(){return u}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:"datepicker"}},[e._v("Fecha*")]),a("div",{staticClass:"border-bottom"},[a("b-form-datepicker",{attrs:{id:"datepicker",locale:"es",placeholder:"Seleccione fecha","date-format-options":{year:"numeric",month:"short",day:"2-digit"}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("valid-alert",{attrs:{dataValue:e.date,validate:e.validate}})],1)},s=[],n=(a(9653),a(74256)),c={name:"SelectDate",components:{validAlert:n.Z},props:{value:{type:[String,Number],default:""},validate:{type:Boolean,default:!1}},data:function(){return{date:this.value}},watch:{date:function(e){this.$emit("input",e)},value:function(e){this.date=e}}},o=c,r=a(1001),l=(0,r.Z)(o,i,s,!1,null,null,null),u=l.exports},74256:function(e,t,a){a.d(t,{Z:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"valid-alert"},[!e.validate||e.dataValue.toString().trim()&&0!==e.dataValue?e._e():a("p",{staticClass:"text-danger"},[e._v(e._s(e.message))])])},s=[],n=(a(9653),{name:"validAlert",props:{message:{type:String,default:"Campo obligatorio"},dataValue:{type:[String,Number,Object],default:""},validate:{type:Boolean,default:!1}}}),c=n,o=a(1001),r=(0,o.Z)(c,i,s,!1,null,null,null),l=r.exports}}]);
//# sourceMappingURL=add-expense-legacy.1d780ad6.js.map