'use strict'; (self.webpackChunkgestor_gastos = self.webpackChunkgestor_gastos || []).push([[179], { 9597: function (t, e, a) { a.d(e, { Z: function () { return u } }); const s = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', [a('label', [t._v('Categoría*')]), a('div', { directives: [{ name: 'click-outside', rawName: 'v-click-outside', value: t.closeDiv, expression: 'closeDiv' }], staticClass: 'position-relative border-bottom mt-2' }, [t.category ? a('div', { staticClass: 'd-flex align-items-center cursor-pointer', on: { click: function (e) { return t.changeShow() } } }, [a('div', { staticClass: 'icon-category icon-category--small', style: { backgroundColor: t.category.backgroundColor } }, [a('b-icon', { style: { color: t.category.iconColor }, attrs: { icon: t.category.icon } })], 1), a('p', { staticClass: 'ml-2 text-medium' }, [t._v(t._s(t.category.detail))])]) : a('p', { staticClass: 'cursor-pointer o-select__text text-medium', on: { click: function (e) { return t.changeShow() } } }, [t._v('Seleccione aqui una categoría...')]), t.show ? a('div', { staticClass: 'o-select' }, t._l(t.categories, function (e) { return a('div', { key: e.getId(), staticClass: 'o-select__item', attrs: { value: e.getId() }, on: { click: function (a) { return t.selectCategory(e) } } }, [a('div', { staticClass: 'd-flex align-items-center' }, [a('div', { staticClass: 'icon-category icon-category--small', style: { backgroundColor: e.backgroundColor } }, [a('b-icon', { style: { color: e.iconColor }, attrs: { icon: e.icon } })], 1), a('p', { staticClass: 'ml-2 text-medium' }, [t._v(t._s(e.detail))])])]) }), 0) : t._e()]), a('valid-alert', { attrs: { 'data-value': t.category, validate: t.validate } })], 1) }; const n = []; const o = a(4256); const i = a(4665); const r = { name: 'SelectCategory', components: { validAlert: o.Z }, props: { validate: { type: Boolean, default: !1 }, value: { type: [String, Number, Object], default: '' } }, data () { return { category: this.value, show: !1 } }, watch: { category (t) { this.$emit('input', t) }, value (t) { this.category = t } }, computed: { ...(0, i.rn)('categoriesStore', ['categories']) }, methods: { closeDiv () { this.show = !1 }, changeShow () { this.show = !this.show }, selectCategory (t) { this.category = t, this.closeDiv() } } }; const l = r; const c = a(1001); const d = (0, c.Z)(l, s, n, !1, null, null, null); var u = d.exports }, 3560: function (t, e, a) { a.d(e, { Z: function () { return c } }); const s = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', { staticClass: 'summary d-flex align-items-center mb-2' }, [a('div', { staticClass: 'd-flex align-items-center w-50' }, [a('b-icon', { staticClass: 'text-success mx-2', attrs: { 'font-scale': 1.4, icon: 'arrow-up-circle-fill' } }), a('div', [a('p', { staticClass: 'gray-xs-text' }, [t._v('Ingresos')]), a('p', { staticClass: 'text-success text-book' }, [t._v('$ ' + t._s(t._f('formatNumber')(t.incomes)))])])], 1), a('div', { staticClass: 'd-flex align-items-center border-left w-50 pl-2' }, [a('b-icon', { staticClass: 'text-danger mx-2', attrs: { 'font-scale': 1.3, icon: 'arrow-down-circle-fill' } }), a('div', [a('p', { staticClass: 'gray-xs-text' }, [t._v('Gastos')]), a('p', { staticClass: 'text-danger text-book' }, [t._v('$ ' + t._s(t._f('formatNumber')(t.expenses)))])])], 1)]) }; const n = []; const o = { name: 'AccountsSummary', props: { expenses: { type: Number, default: 0 }, incomes: { type: Number, default: 0 } } }; const i = o; const r = a(1001); const l = (0, r.Z)(i, s, n, !1, null, null, null); var c = l.exports }, 2434: function (t, e, a) { a.r(e), a.d(e, { default: function () { return j } }); const s = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', [a('title-general', { attrs: { title: t.productSelected.getName(), backRoute: '/products', addButtonFunction: t.addExpense } }), a('div', { staticClass: 'l-content' }, [a('expenses-per-product', { attrs: { product: t.productSelected } }), a('add-product-expense')], 1)], 1) }; const n = []; const o = a(5099); const i = a(4665); const r = a(1160); const l = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('b-modal', { attrs: { id: 'add-expense-product-modal', 'hide-footer': '', 'hide-header': '', centered: '', 'no-close-on-backdrop': '', 'no-close-on-esc': '' }, on: { show: t.openModal, hide: t.clear } }, [a('p', { staticClass: 'text-center text-book' }, [t._v(t._s(t.title) + ' ')]), a('input-general', { attrs: { label: 'Valor', validate: t.validate, isNumber: !0 }, model: { value: t.amount, callback: function (e) { t.amount = e }, expression: 'amount' } }), a('input-general', { attrs: { label: 'Descripción', validate: t.validate }, model: { value: t.description, callback: function (e) { t.description = e }, expression: 'description' } }), a('select-category', { attrs: { validate: t.validate }, model: { value: t.category, callback: function (e) { t.category = e }, expression: 'category' } }), a('select-date', { model: { value: t.date, callback: function (e) { t.date = e }, expression: 'date' } }), a('div', { staticClass: 'mt-3 d-flex align-items-center justify-content-between' }, [a('button', { staticClass: 'btn button-color-general mr-1 w-50', on: { click: function (e) { return t.save() } } }, [t._v('Guardar')]), a('button', { staticClass: 'btn button-white ml-1 w-50', on: { click: function (e) { return t.closeModal() } } }, [t._v('Cancelar')])])], 1) }; const c = []; const d = a(3727); const u = a(4216); const p = a(4511); const m = a(1803); const h = a(9597); const x = { name: 'AddProductExpense', components: { InputGeneral: d.Z, SelectCategory: h.Z, SelectDate: u.Z }, data () { return { amount: '', description: '', category: '', date: p.P.getCurrentDate(), validate: !1, id: '', uc: new m.Z() } }, computed: { validData () { return this.amount && this.description && this.category && this.date }, title () { const t = this.id ? 'Editar' : 'Agregar'; return this.type === 'credit' ? `${t} Gasto` : `${t} Ingreso` }, ...(0, i.rn)('productsStore', ['type', 'productSelected', 'expenseProductSelected']) }, methods: { async save () { this.validate = !0; let t = ''; this.validData && (p.P.startLoading(), t = this.id ? await this.uc.editExpense(this.expenseProductSelected, this.amount, this.description, this.category, this.date) : await this.uc.addExpense(this.amount, this.description, this.category, this.date, this.type), p.P.stopLoading(), t && await (new r.Z()).notify(t), this.closeModal()) }, async updateExpense () { p.P.startLoading(); const t = this.expenseProductSelected; t.id = this.id; const e = await this.uc.editExpense(t, this.amount, this.description, this.category, this.date); return e }, clear () { this.amount = '', this.description = '', this.category = '', this.validate = !1, this.id = '', this.date = p.P.getCurrentDate(), this.setExpenseProductSelected(null) }, closeModal () { this.clear(), this.$bvModal.hide('add-expense-product-modal') }, fillData () { this.expenseProductSelected && (this.id = this.expenseProductSelected.id, this.amount = this.expenseProductSelected.amount, this.description = this.expenseProductSelected.description, this.category = this.expenseProductSelected.category, this.date = this.expenseProductSelected.date) }, openModal () { this.fillData() }, ...(0, i.OI)('productsStore', ['setExpenseProductSelected']) }, mounted () { this.openModal() } }; const f = x; const v = a(1001); const g = (0, v.Z)(f, l, c, !1, null, null, null); const b = g.exports; const y = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', { staticClass: 'l-list px-4' }, [a('product-summary', { attrs: { expenses: t.product.getTotalExpense(), incomes: t.product.getTotalIncome() } }), a('div', { staticClass: 'pb-1 border-bottom d-flex align-items-center justify-content-center' }, [a('div', { staticClass: 'd-flex align-items-center justify-content-center' }, [a('div', { staticClass: 'action action--sm mr-2 d-flex' }, [a('button', { staticClass: 'button-action', attrs: { disabled: '' } }, [a('b-icon', { attrs: { icon: 'coin' } })], 1)]), a('p', { staticClass: 'gray-xs-text mr-1' }, [t._v('Saldo total')])]), a('div', { staticClass: 'text-center pl-2 mb3' }, [a('p', { staticClass: 'text-book text-medium' }, [t._v('$ ' + t._s(t._f('formatNumber')(t.product.getTotalIncome() - t.product.getTotalExpense())))])])]), t._l(t.expensesByDate, function (e) { return a('div', { key: e.date, staticClass: 'mt-4' }, [a('p', { staticClass: 'text-sm text-book mb-3' }, [t._v(' ' + t._s(t._f('formatDateMonthYear')(e.date)) + ' ')]), t._l(e.expenses, function (t) { return a('expense-product-row', { key: t.id, attrs: { expense: t } }) })], 2) })], 2) }; const C = []; const _ = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', { staticClass: 'mb-3 pb-2' }, [a('div', { staticClass: 'd-flex align-items-center' }, [a('div', { staticClass: 'd-flex align-items-center' }, [a('div', { staticClass: 'icon-category icon-category--small mr-2', style: { backgroundColor: t.category.backgroundColor } }, [a('b-icon', { style: { color: t.category.iconColor }, attrs: { icon: t.category.icon } })], 1)]), a('div', { staticClass: 'w-100' }, [a('div', { staticClass: 'd-flex align-items-center justify-content-between' }, [a('p', { staticClass: 'text-book text-capitalize text-medium' }, [t._v(t._s(t.expense.description) + ' ')]), a('p', { staticClass: 'text-book text-sm', class: t.classAmount }, [t._v('$ ' + t._s(t._f('formatNumber')(t.expense.amount)) + ' ')])]), a('div', { staticClass: 'd-flex align-items-center justify-content-between pt-1' }, [a('p', { staticClass: 'gray-xs-text' }, [t._v(t._s(t._f('formatAllDate')(t.expense.date)) + ' | ' + t._s(t.infoExpense) + ' ')]), a('div', { staticClass: 'd-flex align-items-center justify-content-between' }, [a('button', { staticClass: 'button-action button-action--edit ml-3', on: { click: function (e) { return t.openModal() } } }, [a('b-icon', { attrs: { icon: 'pencil' } })], 1), a('button', { staticClass: 'button-action ml-3 button-action--delete', on: { click: function (e) { return t.deleteExpense() } } }, [a('b-icon', { attrs: { icon: 'trash' } })], 1)])])])])]) }; const w = []; const S = { name: 'ExpenseRow', props: { expense: { type: Object, required: !0 } }, data () { return { uc: new m.Z() } }, computed: { classAmount () { return this.expense.type === 'credit' ? 'text-danger' : 'text-success' }, infoExpense () { return this.expense.type === 'credit' ? 'Gasto' : 'Ingreso' }, category () { return this.expense.category } }, methods: { async deleteExpense () { const t = this.expense.type === 'credit' ? 'gasto' : 'ingreso'; const e = `Se eliminará el ${t} ¿Está seguro de realizarla?`; const a = await (new r.Z()).confirm(e); a.isConfirmed && await this.deleteAll(!0) }, async deleteAll (t) { p.P.startLoading(); try { await this.uc.deleteExpense(this.expense), p.P.stopLoading() } catch (e) { (new r.Z()).notify('Ocurrió un error!'), p.P.stopLoading() } }, openModal () { this.setExpenseProductSelected(this.expense), this.$bvModal.show('add-expense-product-modal') }, ...(0, i.OI)('productsStore', ['setExpenseProductSelected']) } }; const k = S; const P = (0, v.Z)(k, _, w, !1, null, null, null); const E = P.exports; const Z = a(3560); const D = a(7133); const B = a.n(D); const $ = { components: { ExpenseProductRow: E, ProductSummary: Z.Z }, name: 'ExpensesPerProduct', props: { product: { type: Object, required: !0 } }, computed: { expensesByDate () { let t = []; const e = []; let a = ''; let s = ''; const n = this.product; return n.expenses.sort((t, e) => new Date(e.date) - new Date(t.date)), n.expenses.forEach((n, o) => { o === 0 && (a = p.P.getFirstDay(n.date), s = p.P.getLastDay(n.date)), B()(n.date).isBetween(a, s, void 0, '[]') || (e.push({ date: a, expenses: t }), a = p.P.getFirstDay(n.date), s = p.P.getLastDay(n.date), t = []), t.push(n) }), e.push({ date: a, expenses: t }), n.expenses.length > 0 ? e : [] } } }; const N = $; const T = (0, v.Z)(N, y, C, !1, null, null, null); const A = T.exports; const I = { components: { TitleGeneral: o.Z, AddProductExpense: b, ExpensesPerProduct: A }, name: 'DetailsAccount', computed: { ...(0, i.rn)('productsStore', ['productSelected']) }, methods: { async addExpense () { const t = await (new r.Z()).selectOption('Gasto', 'Ingreso'); t.isConfirmed ? this.setType('credit') : t.isDenied && this.setType('debit'), (t.isConfirmed || t.isDenied) && this.$bvModal.show('add-expense-product-modal') }, ...(0, i.OI)('productsStore', ['setType', 'setProductSelected']) }, created () { this.productSelected || this.$router.push('/products') }, beforeDestroy () { this.setProductSelected(null) } }; const R = I; const M = (0, v.Z)(R, s, n, !1, null, null, null); var j = M.exports }, 3727: function (t, e, a) { a.d(e, { Z: function () { return u } }); const s = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', { staticClass: 'mb-1' }, [a('label', [t._v(t._s(t.label))]), a('input', { directives: [{ name: 'model', rawName: 'v-model', value: t.text, expression: 'text' }], staticClass: 'form-control', class: t.customClass, attrs: { type: 'text', maxlength: t.max, pattern: t.pattern }, domProps: { value: t.text }, on: { input: function (e) { e.target.composing || (t.text = e.target.value) } } }), a('valid-alert', { attrs: { 'data-value': t.text, validate: t.validate } })], 1) }; const n = []; const o = a(4511); const i = a(4256); const r = { name: 'InputGeneral', components: { validAlert: i.Z }, props: { label: { type: String, default: '' }, value: { type: [String, Number], default: '' }, customClass: { type: String, default: '' }, max: { type: Number, default: 100 }, isNumber: { type: Boolean, default: !1 }, pattern: { type: String, default: '' }, validate: { type: Boolean, default: !1 } }, data () { return { text: this.value } }, watch: { text (t) { this.isNumber && (this.text = o.P.onlyNumber(t)), this.$emit('input', this.text) }, value (t) { this.text = t } } }; const l = r; const c = a(1001); const d = (0, c.Z)(l, s, n, !1, null, null, null); var u = d.exports }, 4216: function (t, e, a) { a.d(e, { Z: function () { return d } }); const s = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', [a('label', { attrs: { for: 'datepicker' } }, [t._v('Fecha*')]), a('div', { staticClass: 'border-bottom' }, [a('b-form-datepicker', { attrs: { id: 'datepicker', locale: 'es', placeholder: 'Seleccione fecha', 'date-format-options': { year: 'numeric', month: 'short', day: '2-digit' } }, model: { value: t.date, callback: function (e) { t.date = e }, expression: 'date' } })], 1), a('valid-alert', { attrs: { dataValue: t.date, validate: t.validate } })], 1) }; const n = []; const o = a(4256); const i = { name: 'SelectDate', components: { validAlert: o.Z }, props: { value: { type: [String, Number], default: '' }, validate: { type: Boolean, default: !1 } }, data () { return { date: this.value } }, watch: { date (t) { this.$emit('input', t) }, value (t) { this.date = t } } }; const r = i; const l = a(1001); const c = (0, l.Z)(r, s, n, !1, null, null, null); var d = c.exports }, 5099: function (t, e, a) { a.d(e, { Z: function () { return c } }); const s = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', { staticClass: 'l-title', class: t.addClass }, [a('h2', { staticClass: 'main-title' }, [t._v(t._s(t.title))]), t.backRoute ? a('button', { staticClass: 'btn back-arrow', on: { click: function (e) { return t.goToRoute(t.backRoute) } } }, [a('b-icon', { attrs: { icon: 'arrow-left' } })], 1) : t._e(), t.addButtonRoute ? a('button', { staticClass: 'btn btn-block button-rounded button-big button-outline-color-general', on: { click: function (e) { return t.goToRoute(t.addButtonRoute) } } }, [t._v('+')]) : t._e(), t.addButtonFunction ? a('button', { staticClass: 'btn btn-block button-rounded button-big button-outline-color-general', on: { click: function (e) { return t.addButtonFunction() } } }, [t._v('+')]) : t._e()]) }; const n = []; const o = { name: 'TitleGeneral', props: { title: { type: String, default: '' }, backRoute: { type: String, default: '' }, addButtonRoute: { type: String, default: '' }, addButtonFunction: { type: Function } }, computed: { addClass () { return this.backRoute ? 'l-title-back' : '' } }, methods: { goToRoute (t) { this.$router.push(t) } } }; const i = o; const r = a(1001); const l = (0, r.Z)(i, s, n, !1, null, null, null); var c = l.exports }, 4256: function (t, e, a) { a.d(e, { Z: function () { return c } }); const s = function () { const t = this; const e = t.$createElement; const a = t._self._c || e; return a('div', { staticClass: 'valid-alert' }, [!t.validate || t.dataValue.toString().trim() && t.dataValue !== 0 ? t._e() : a('p', { staticClass: 'text-danger' }, [t._v(t._s(t.message))])]) }; const n = []; const o = { name: 'validAlert', props: { message: { type: String, default: 'Campo obligatorio' }, dataValue: { type: [String, Number, Object], default: '' }, validate: { type: Boolean, default: !1 } } }; const i = o; const r = a(1001); const l = (0, r.Z)(i, s, n, !1, null, null, null); var c = l.exports }, 1160: function (t, e, a) { a.d(e, { Z: function () { return n } }); const s = a(8935); class n {notify (t) { return s.default.swal(t) }confirm (t, e = 'Confirmación!') { return s.default.swal({ title: e, text: t, type: 'warning', showCancelButton: !0, confirmButtonText: 'Aceptar', reverseButtons: !0 }) }selectOption (t, e, a = 'Seleccione una opción', n = '#d51212', o = '#4caf50') { return s.default.swal({ title: a, type: '', showDenyButton: !0, showCancelButton: !0, confirmButtonColor: n, confirmButtonText: t, denyButtonText: e, denyButtonColor: o, cancelButtonText: 'Cancelar' }) }} } }])
// # sourceMappingURL=details-product.1357ac1d.js.map
